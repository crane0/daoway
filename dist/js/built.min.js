$(function () {
  //发送请求，获取首页的数据
  $.getJSON('http://localhost:3000/getIndex', function (data) {
    console.log(data)
    $('.box-container').html(template('box', {data: data}))
    $('.banner-nav > .list').html(template('banner', {data: data}))
  })


  //导航栏动画
  var $header = $('.header-container');
  $(window).scroll(function () {
    if($(this).scrollTop()>70){
      $header.addClass('on');
    }else {
      $header.removeClass('on');
    }
  })

  //轮播图参数
  $('.slideTxtBox').slide({
    effect: "fold",   //覆盖效果
    autoPlay: true,
    // trigger: "click"
  });

  //导航栏，点击变色
  let $lis = $('.select li')
  for(let i = 0; i < $lis.length; i++){
    //这种绑定事件的方式是jQuery的，所以要包装被jQuery对象
    $($lis[i]).on('click', function () {
      for(let i = 0; i < $lis.length; i++){
        $lis[i].className = ''
      }
      this.className = 'active'
    })
  }



  /*
  * 原本计划的，使用jQuery切换img的不同路径，
  *   但是，使用jQuery选择器，获取到的是所有满足条件的html元素，
  *   所以，最终放弃了。
  *   遇到的另外一个问题是，
  *     因为使用了art-template模板，进行的填充数据，
  *     所以当还没有渲染到页面上时，使用jQuery无法获取到该元素，
  *     所以，加了一个延时定时器，加入异步队列获取。
  * */
  // setTimeout(function () {
  //
  //   let $item = $('.banner-nav > .list > .item')
  //   $item.hover(
  //     function () {
  //       console.log(2)
  //       $('.replace-img').attr('src', '../images/icon1.png')
  //     },
  //     function () {
  //       console.log(11)
  //       $('.replace-img').attr('src', '../images/right.png')
  //     }
  //   );
  // })


})